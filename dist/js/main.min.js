var draw=function(){main=document.querySelector("main");var t=document.querySelector("main").offsetWidth,e=document.querySelector("main").offsetHeight;return canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),rect=canvas.getBoundingClientRect(),x=0,y=0,x1=0,y1=0,x2=0,y2=0,lx=!1,ly=!1,shape="",isDrawing=!1,stroke="",fill="",points=[],i=0,{setXY:function(t){lx=x,ly=y,x=t.clientX-rect.left-canvas.offsetLeft,y=t.clientY-rect.top-canvas.offsetTop},writeXY:function(){document.getElementById("trackX").innerHTML="X: "+x,document.getElementById("trackY").innerHTML="Y: "+y},setStart:function(){x1=x,y1=y},setEnd:function(){x2=x,y2=y},setShape:function(t){shape=t},getShape:function(){return shape},setIsDrawing:function(t){isDrawing=t},getIsDrawing:function(){return isDrawing},draw:function(){ctx.restore(),"rectangle"===shape?this.drawRect():"line"===shape?this.drawLine():"circle"===shape?this.drawCircle():"path"===shape?this.drawPath():"triangle"===shape?this.drawTriangle():alert("Please choose a shape"),ctx.save()},drawLine:function(){ctx.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.stroke()},drawCircle:function(){ctx.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),ctx.fillStyle="#"+Math.floor(16777215*Math.random()).toString(16);let t=x1-x2,e=y1-y2,n=Math.sqrt(t*t+e*e);ctx.beginPath(),ctx.arc(x1,y1,n,0,2*Math.PI),ctx.stroke(),ctx.fill()},drawRect:function(t,e,n,a){ctx.fillStyle="#"+Math.floor(16777215*Math.random()).toString(16),ctx.fillRect(x1,y1,x2-x1,y2-y1)},drawPath:function(){ctx.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),ctx.beginPath(),ctx.moveTo(lx,ly),ctx.lineTo(x,y),ctx.stroke()},drawTriangle:function(){console.log(12334),ctx.fillStyle="#"+Math.floor(16777215*Math.random()).toString(16),ctx.beginPath(),ctx.moveTo(x1,y2),ctx.lineTo(x2,y2),ctx.lineTo(x3,y3),ctx.closePath(x1,y1),ctx.stroke()},getCanvas:function(){return canvas},init:function(){canvas.width=t,canvas.height=e,document.querySelector("main").appendChild(canvas)}}}();draw.init(),draw.getCanvas().addEventListener("mousemove",function(t){draw.setXY(t),draw.writeXY(),"path"==draw.getShape()&&!0===draw.getIsDrawing()&&draw.draw()},!1),draw.getCanvas().addEventListener("mousedown",function(){draw.setStart(),draw.setIsDrawing(!0)},!1),draw.getCanvas().addEventListener("mouseup",function(){draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)},!1),document.getElementById("btnRect").addEventListener("click",function(){draw.setShape("rectangle")},!1),document.getElementById("btnLine").addEventListener("click",function(){draw.setShape("line")},!1),document.getElementById("btnCircle").addEventListener("click",function(){draw.setShape("circle")},!1),document.getElementById("btnPath").addEventListener("click",function(){draw.setShape("path")},!1),document.getElementById("btnTriangle").addEventListener("click",function(){draw.setShape("triangle")},!1);